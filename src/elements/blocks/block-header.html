<link rel="import" href="../../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../../bower_components/app-route/app-location.html">
<link rel="import" href="../blocks/block-menu.html">
<link rel="import" href="../../styles/shared.html">

<dom-module id="block-header">
  <template>
    <style include="shared">
      :host {
        display: block;
      }
      .header {
        background: #cc0002;
      }
      .poder-edomex {
        padding: 1rem 0;
      }
      .poder-edomex a {
        display: block;
        width: 460px;
        height: 68px;
        background: url(../../../images/poder-edomex.svg) no-repeat 16px top;
      }

      .search-box {
        background: #FFF;
        height: 26px;
        width: 180px;
        display: inline-block;
        float: right;
        margin-top: 16px
      }
      .search-box input {
        font-size: .8rem;
        background: transparent;
        border: 0;
        padding: 0 0 0 .5rem;
        outline: 0
      }
      .search-box .search-icon {
        height: 20px;
        width: 20px;
        background: url(../../../images/icons/search.svg) no-repeat top left;
        background-size: 16px;
        position: absolute;
        right: 16px;
        top: 21px;
        cursor: pointer;
      }

      .date {
        font-size: .8rem;
        text-align: right;
        color: #FFF;
        margin-top: 30px;
      }

    </style>

    <app-location id="location" use-hash-as-path></app-location>

    <div class="header">
      <div class="container-fluid">

        <div class="row">
          <div class="col-lg-8">
            <div class="poder-edomex">
              <a href="#/front"></a>
            </div>
          </div>
          <div class="col-lg-4">
            <div class="row">
              <div class="col">

                <div class="search-box">
                  <input id="search" value="{{search::input}}" placeholder="Buscar" type="text" on-keydown="_keydown">
                  <div class="search-icon"></div>
                </div>

              </div>
            </div>

            <div class="row">
              <div class="col">

                <div class="date">[[date]]</div>

              </div>
            </div>

          </div>
        </div>

        <div class="row">
          <div class="col">

            <block-menu menu="[[menu]]"></block-menu>

          </div>
        </div>

      </div>
    </div>

  </template>

  <script>
  
    class BlockHeader extends Polymer.Element {
      static get is() { return 'block-header'; }
      static get properties() {
        return {

          menu: {
            type: Object
          },

          search: {
            type: String
          },

          date: {
            type: String,
            value: null
          }

        };
      }

      ready() {
        super.ready();

        let days = ['Domingo','Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
            months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
            date = new Date();

        this.date = days[date.getDay()] + ', ' + months[date.getMonth()] + ' ' + date.getDate() + ', ' + date.getFullYear();
      }

      _keydown(e) {

        if (e.key == 'Enter') {
          console.log(this.search);
          let search = this.search.replace(" ", "-");
          this.$.location.set('path', '/search/'+search);
          this.search = '';

        }

      }


    }

    window.customElements.define(BlockHeader.is, BlockHeader);
  </script>
</dom-module>
